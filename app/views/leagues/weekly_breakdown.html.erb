<div class="container-fluid">
  <div class="row justify-content-center margin-below">
    <div class="col-xs-12 col-lg-9">
      <h1>Weekly Breakdown</h1>
      <div class="margin-below">
        <span class="badge light-red-bg">
          Eliminated
        </span>
        <span class="badge light-green-bg">
          Elim Winner
        </span>
        <span class="badge light-blue-bg">
          QF Winner
        </span>
        <span class="badge light-yellow-bg">
          Episode Sweep
        </span>
      </div>
      <table class="table table-bordered">
        <thead>
        <tr>
          <th scope="col"></th>
          <% (2..13).each do |episode| %>
            <% if @week_num.to_i == episode %>
              <th scope="col">Week <%= episode %></th>
            <% else %>
              <th scope="col"><a href="<%= weekly_breakdown_path(week: episode) %>">Week <%= episode %></a></th>
            <% end %>
          <% end %>
        </tr>
        </thead>
        <tbody>
        <% @league.chefs.each do |chef| %>
          <tr>
            <th scope="row"><%= render "shared/chef_link", chef: chef %></th>
            <% (2..13).each do |episode| %>
              <th class="<%= chef.episode_for(episode)&.weekly_breakdown_color %>"><%= @league.scoring_system.episode_points_for(chef, episode) %></th>
            <% end %>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <% if @episode %>
    <div class="row justify-content-center margin-below">
      <div class="col-xs-12 col-lg-6">
        <h1>Week <%= @episode.week %> Results</h1>
        <div class="card" style="width: 30rem;">
          <div class="card-header">
            <b>Quickfire Favorites</b>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item light-green-bg"><%= render "shared/chef_link", chef: @episode.quickfire_winner %> (Winner)</li>
            <% @episode.quickfire_runners_up.each do |chef| %>
              <li class="list-group-item"><%= render "shared/chef_link", chef: chef %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
    <div class="row justify-content-center margin-below">
      <div class="col-xs-12 col-lg-6">
        <div class="card" style="width: 30rem;">
          <div class="card-header">
            <b>Elim Favorites</b>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item light-green-bg"><%= render "shared/chef_link", chef: @episode.elim_winner %> <%= @episode.sweep? ? "(Episode Sweep)" : "(Winner)" %></li>
            <% @episode.elim_runners_up.each do |chef| %>
              <li class="list-group-item"><%= render "shared/chef_link", chef: chef %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
    <div class="row justify-content-center margin-below">
      <div class="col-xs-12 col-lg-6">
        <div class="card" style="width: 30rem;">
          <div class="card-header">
            <b>Elim Bottom</b>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item light-red-bg"><%= render "shared/chef_link", chef: @episode.eliminated_chef %> (Eliminated)</li>
            <% @episode.elim_bottom_chefs.each do |chef| %>
              <li class="list-group-item"><%= render "shared/chef_link", chef: chef %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
    <% if @episode.lck_winner %>
      <div class="row justify-content-center margin-below">
        <div class="col-xs-12 col-lg-6">
          <div class="card" style="width: 30rem;">
            <div class="card-header">
              <b>Last Chance Kitchen Winner</b>
            </div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item light-green-bg"><%= render "shared/chef_link", chef: @episode.lck_winner %></li>
            </ul>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
